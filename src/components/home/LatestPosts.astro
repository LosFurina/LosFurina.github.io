---
import type { CollectionEntry } from "astro:content";
import FormattedDate from "../FormattedDate.astro";

interface Props {
	posts: CollectionEntry<"blog">[];
}

const { posts } = Astro.props;
---

<section class="home-section">
	<div class="home-container">
		<div class="home-section__header">
			<h2 class="home-section__title">最新文章 / Latest Posts</h2>
			<p class="home-section__subtitle">最近的写作与思考</p>
		</div>

		<ul class="post-list">
			{posts.map((post) => (
				<li class="post-item">
					<div class="post-date">
						<FormattedDate date={post.data.pubDate} />
					</div>
					<div class="post-main">
						<a class="post-title" href={`/blog/${post.id}/`}>
							{post.data.title}
						</a>
						<p class="post-desc">{post.data.description}</p>
					</div>
				</li>
			))}
		</ul>
	</div>
</section>

<style>
	.post-list {
		list-style: none;
		padding: 0;
		margin: 0;
		display: grid;
		gap: 1.25rem;
	}

	.post-item {
		display: grid;
		grid-template-columns: 120px 1fr;
		gap: 1.25rem;
		align-items: start;
	}

	.post-date {
		font-size: 0.85rem;
		color: rgb(var(--gray));
	}

	.post-title {
		font-weight: 600;
		text-decoration: none;
		color: rgb(var(--gray-dark));
	}

	.post-title:hover {
		color: var(--accent);
	}

	.post-desc {
		margin: 0.35rem 0 0;
		color: rgb(var(--gray));
		font-size: 0.95rem;
	}

	@media (max-width: 720px) {
		.post-item {
			grid-template-columns: 1fr;
			gap: 0.4rem;
		}
	}
</style>
